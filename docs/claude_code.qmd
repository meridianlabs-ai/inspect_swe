---
title: Claude Code
agent: claude_code
agent_provider: "Anthropic"
agent_name: "Claude Code"
agent_url: "https://docs.anthropic.com/en/docs/claude-code/overview"
agent_disallowed_tool: "WebSearch"
---

{{< include _snippets/agent_intro.md >}}

## Options

The following options are supported for customizing the behavior of the agent:

| Option | Description |
|------------------------------------|------------------------------------|
| `system_prompt` | Additional system prompt to append to default system prompt. |
| `mcp_servers` | MCP servers (see [MCP Servers](#mcp-servers) below for details). |
| `bridged_tools` | Host-side Inspect tools to expose via MCP (see [Bridged Tools](#bridged-tools) below for details). |
| `disallowed_tools` | Optionally disallow tools (e.g. `"{{< meta agent_disallowed_tool >}}"`) |
| `attempts` | Allow the agent to have multiple scored attempts at solving the task. |
| `model` | Model name to use for agent (defaults to main model for task). |
| `opus_model` |  The model to use for `opus`, or for `opusplan` when Plan Mode is active. Defaults to `model`. |
| `sonnet_model` | The model to use for `sonnet`, or for `opusplan` when Plan Mode is not active. Defaults to `model`. |
| `haiku_model` | The model to use for haiku, or [background functionality](https://code.claude.com/docs/en/costs#background-token-usage). Defaults to `model`. |
| `subagent_model` | The model to use for [subagents](https://code.claude.com/docs/en/sub-agents). Defaults to `model`. |
| `filter` | Filter for intercepting bridged model requests. |
| `retry_refusals` | Should refusals be retried? (pass number of times to retry) |
| `cwd` | Workding directory for {{< meta agent_name >}} session. |
| `env` | Environment variables to set for {{< meta agent_name >}}. |
| `version` | Version of {{< meta agent_name >}} to use (see [Installation](#installation) below for details) |

: {tbl-colwidths=\[25,75\]}

For example, here we specify a custom system prompt and disallow the `{{< meta agent_disallowed_tool >}}` tool:

```python
{{< meta agent >}}(
    system_prompt="You are an ace system researcher.",
    disallowed_tools=["{{< meta agent_disallowed_tool >}}"]
)
```

{{< include _snippets/agent_mcp_servers.md >}}

{{< include _snippets/agent_bridged_tools.md >}}

## Installation

By default, the agent will download the current stable version of {{< meta agent_name >}} and copy it to the sandbox. You can override this behaviour using the `version` option:

| Option | Description |
|------------------------------------|------------------------------------|
| `"auto"` | Use any available version of {{< meta agent_name >}} in the sandbox, otherwise download the current stable version. |
| `"sandbox"` | Use the version of {{< meta agent_name >}} in the sandbox (raises `RuntimeError` if not available in the sandbox) |
| `"stable"` | Download and use the current stable version. |
| `"latest"` | Download and use the very latest version. |
| `"x.x.x"` | Download and use a specific version number. |

: {tbl-colwidths=\[25,75\]}

{{< include _snippets/agent_installation.md >}}

{{< include _snippets/agent_troubleshooting.md >}}
